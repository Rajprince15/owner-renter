=================================================================
HOMER - PHASED IMPLEMENTATION PLAN
=================================================================

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    ðŸ”  IMPORTANT NOTE  ðŸ”                     â•‘
â•‘                                                               â•‘
â•‘  DATABASE: MySQL (Production) / MariaDB (Development)        â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â•‘
â•‘  â€¢ LLM will use MariaDB locally during development          â•‘
â•‘  â€¢ User will use MySQL in production (credentials private)  â•‘
â•‘  â€¢ 100% compatible - same SQL syntax                        â•‘
â•‘  â€¢ See workflow.txt for detailed database strategy          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

This document breaks down the entire Homer platform into 12 small phases.
Each phase is designed to take approximately 4-5 credits and can be 
completed independently.

Each phase builds on the previous one and delivers working features that
can be tested immediately.

=================================================================
OVERVIEW OF ALL PHASES
=================================================================

PHASE 1: Project Setup + Landing Page
PHASE 2: Authentication System (Login/Signup)
PHASE 3: Basic Property Listing (Owner Side)
PHASE 4: Property Search & Display (Renter Side)
PHASE 5: Basic Chat System (REST API)
PHASE 6: Free Tier Limits & Upsell Modals
PHASE 7: Payment Integration (Mock + Razorpay)
PHASE 8: Premium Features Unlock
PHASE 9: Lifestyle Search Engine (Mock Data)
PHASE 10: Document Verification Workflow
PHASE 11: Reverse Marketplace
PHASE 12: Analytics Dashboard & Polish

After completing all 12 phases, you'll have a fully functional MVP!

=================================================================
PHASE 1: PROJECT SETUP + LANDING PAGE
=================================================================

GOAL: Setup project structure and create a beautiful landing page

ESTIMATED CREDITS: 4-5

WHAT WILL BE BUILT:
-------------------
1. Backend setup (FastAPI + MySQL/MariaDB)
2. Frontend setup (React + Tailwind)
3. Environment configuration
4. Landing page with hero section
5. Basic routing structure

DATABASE SETUP (CRITICAL):
--------------------------
- LLM will use: MariaDB (mysql://root@localhost:3306/homer_db)
- User will use: MySQL (your production credentials - private)
- Connection configured in .env file
- 100% compatible - no code changes needed to switch

FILES TO CREATE:
----------------
Backend:
- /app/backend/server.py (FastAPI main file)
- /app/backend/requirements.txt
- /app/backend/.env (with MariaDB connection for development)
- /app/backend/config.py (environment variables)
- /app/backend/database.py (MySQL/MariaDB connection using SQLAlchemy)

Frontend:
- /app/frontend/package.json
- /app/frontend/tailwind.config.js
- /app/frontend/src/App.js
- /app/frontend/src/pages/LandingPage.js
- /app/frontend/src/components/Hero.js
- /app/frontend/src/components/Navbar.js
- /app/frontend/src/components/Footer.js
- /app/frontend/src/index.css
- /app/frontend/.env

FEATURES IN THIS PHASE:
-----------------------
âœ“ Beautiful landing page with:
  - Hero section with value proposition
  - "Find a Home" and "List Property" CTAs
  - Feature highlights (Trust, Lifestyle Search, Reverse Marketplace)
  - How it works section
  - Pricing preview
  - Footer with links

âœ“ Responsive design (mobile + desktop)
âœ“ Smooth animations and transitions
âœ“ Backend server running on port 8001
âœ“ Frontend running on port 3000
âœ“ MariaDB connection established (development database)

TESTING CHECKLIST:
------------------
â–¡ Backend server starts without errors
â–¡ Frontend loads at localhost:3000
â–¡ Landing page looks good on mobile and desktop
â–¡ Navigation links work (even if pages don't exist yet)
â–¡ MariaDB connection successful (check backend logs)

WHAT WORKS AFTER PHASE 1:
--------------------------
âœ… Professional landing page
âœ… Backend API ready for endpoints
âœ… Database connection ready
âœ… Project structure in place

=================================================================
PHASE 2: AUTHENTICATION SYSTEM (LOGIN/SIGNUP)
=================================================================

GOAL: Complete user authentication with JWT tokens

ESTIMATED CREDITS: 4-5

WHAT WILL BE BUILT:
-------------------
1. User registration (email/phone + password)
2. Login system with JWT tokens
3. User profile structure in MySQL/MariaDB (users table)
4. Protected routes middleware
5. Login and Signup pages

FILES TO CREATE:
----------------
Backend:
- /app/backend/models/user.py (User schema)
- /app/backend/routes/auth.py (Auth endpoints)
- /app/backend/utils/jwt_helper.py (JWT functions)
- /app/backend/utils/password_helper.py (Hashing)
- /app/backend/middleware/auth_middleware.py

Frontend:
- /app/frontend/src/pages/Login.js
- /app/frontend/src/pages/Signup.js
- /app/frontend/src/context/AuthContext.js
- /app/frontend/src/services/authService.js
- /app/frontend/src/components/ProtectedRoute.js

API ENDPOINTS:
--------------
POST /api/auth/register
POST /api/auth/login
POST /api/auth/logout
GET  /api/auth/me (get current user)

FEATURES IN THIS PHASE:
-----------------------
âœ“ Signup form with:
  - Email and phone
  - Password (hashed with bcrypt)
  - User type selection (Renter/Owner/Both)
  - Full name

âœ“ Login form with:
  - Email/phone login
  - Password verification
  - JWT token generation

âœ“ Auth context for global state
âœ“ Protected routes (redirect to login if not authenticated)
âœ“ "Logout" functionality
âœ“ User info stored in localStorage
âœ“ Automatic login persistence

DATABASE SCHEMA (users table - MySQL/MariaDB):
-----------------------------------------------
NOTE: This table structure works identically on both MariaDB (development) 
and MySQL (production). See workflow.txt for full schema with CREATE TABLE syntax.

Key fields:
- user_id: VARCHAR(36) PRIMARY KEY (UUID)
- email: VARCHAR(255) UNIQUE NOT NULL
- phone: VARCHAR(20) UNIQUE NOT NULL
- password_hash: VARCHAR(255) NOT NULL
- user_type: ENUM('renter', 'owner', 'both') NOT NULL
- full_name: VARCHAR(255)
- created_at: TIMESTAMP DEFAULT CURRENT_TIMESTAMP
- subscription_tier: ENUM('free', 'premium') DEFAULT 'free'
- contacts_used: INT DEFAULT 0
- is_verified_renter: BOOLEAN DEFAULT FALSE
- is_verified_owner: BOOLEAN DEFAULT FALSE
- renter_preferences: JSON (MySQL 5.7+ / MariaDB 10.2+ support)
- employment_info: JSON

(See workflow.txt Section 2 for complete CREATE TABLE statement)

TESTING CHECKLIST:
------------------
â–¡ Can create new user account
â–¡ Login with correct credentials works
â–¡ Login with wrong credentials fails
â–¡ JWT token is stored in localStorage
â–¡ Protected routes redirect to login if not authenticated
â–¡ User info persists after page refresh
â–¡ Logout clears token and redirects to home

WHAT WORKS AFTER PHASE 2:
--------------------------
âœ… Complete authentication system
âœ… Users can register and login
âœ… JWT-based authorization
âœ… Protected routes ready for dashboards

=================================================================
PHASE 3: BASIC PROPERTY LISTING (OWNER SIDE)
=================================================================

GOAL: Owners can create and manage property listings

ESTIMATED CREDITS: 4-5

WHAT WILL BE BUILT:
-------------------
1. Property creation form (multi-step)
2. Image upload functionality
3. Property listing management
4. Owner dashboard (basic)

FILES TO CREATE:
----------------
Backend:
- /app/backend/models/property.py (Property schema)
- /app/backend/routes/properties.py
- /app/backend/services/storage_service.py (file upload - local)

Frontend:
- /app/frontend/src/pages/owner/Dashboard.js
- /app/frontend/src/pages/owner/AddProperty.js
- /app/frontend/src/pages/owner/MyProperties.js
- /app/frontend/src/pages/owner/EditProperty.js
- /app/frontend/src/components/PropertyForm.js
- /app/frontend/src/services/propertyService.js

API ENDPOINTS:
--------------
POST   /api/properties/create
GET    /api/properties/my-properties
GET    /api/properties/:property_id
PUT    /api/properties/:property_id
DELETE /api/properties/:property_id
POST   /api/properties/:property_id/upload-images

FEATURES IN THIS PHASE:
-----------------------
âœ“ Multi-step property form:
  - Step 1: Basic info (title, type, BHK, rent, deposit)
  - Step 2: Location (address, city, locality)
  - Step 3: Details (amenities, furnishing, parking)
  - Step 4: Images upload (drag & drop)
  - Step 5: Preview and submit

âœ“ Owner dashboard showing:
  - Total properties listed
  - Quick stats
  - "Add Property" button
  - List of properties

âœ“ My Properties page:
  - Grid of property cards
  - Edit/Delete actions
  - Status indicators (active/inactive)
  - "Unverified" badge on all properties

âœ“ Local image storage (uploads folder)
âœ“ Form validation
âœ“ Success/error messages

DATABASE SCHEMA (properties table - MySQL/MariaDB):
----------------------------------------------------
NOTE: This table structure works identically on both MariaDB (development) 
and MySQL (production). JSON columns used for flexible nested data.

Key fields:
- property_id: VARCHAR(36) PRIMARY KEY (UUID)
- owner_id: VARCHAR(36) (foreign key to users)
- title: VARCHAR(255) NOT NULL
- description: TEXT
- property_type: VARCHAR(50)
- bhk_type: VARCHAR(20)
- rent: DECIMAL(10,2)
- security_deposit: DECIMAL(10,2)
- location: JSON (address, city, locality, pincode, lat, long)
- details: JSON (carpet_area, furnishing, parking, amenities, etc.)
- images: JSON (array of image URLs)
- is_verified: BOOLEAN DEFAULT FALSE
- verification_tier: ENUM('free', 'verified') DEFAULT 'free'
- created_at: TIMESTAMP DEFAULT CURRENT_TIMESTAMP
- status: ENUM('active', 'inactive', 'rented', 'deleted') DEFAULT 'active'

(See workflow.txt Section 2 for complete CREATE TABLE statement)

TESTING CHECKLIST:
------------------
â–¡ Owner can create new property listing
â–¡ Multi-step form works smoothly
â–¡ Images upload successfully
â–¡ Property appears in "My Properties"
â–¡ Can edit existing property
â–¡ Can delete property
â–¡ Form validation works (required fields)
â–¡ Owner dashboard shows correct property count

WHAT WORKS AFTER PHASE 3:
--------------------------
âœ… Owners can list properties
âœ… Property CRUD operations complete
âœ… Image upload functional
âœ… Owner dashboard operational
âœ… Database has property listings

=================================================================
PHASE 4: PROPERTY SEARCH & DISPLAY (RENTER SIDE)
=================================================================

GOAL: Renters can search and view properties

ESTIMATED CREDITS: 4-5

WHAT WILL BE BUILT:
-------------------
1. Property search page with filters
2. Property listing grid
3. Property detail page
4. Renter dashboard (basic)
5. Shortlist functionality

FILES TO CREATE:
----------------
Backend:
- /app/backend/routes/search.py
- /app/backend/services/search_service.py

Frontend:
- /app/frontend/src/pages/Search.js
- /app/frontend/src/pages/PropertyDetail.js
- /app/frontend/src/pages/renter/Dashboard.js
- /app/frontend/src/pages/renter/Shortlists.js
- /app/frontend/src/components/PropertyCard.js
- /app/frontend/src/components/SearchFilters.js
- /app/frontend/src/components/PropertyGallery.js
- /app/frontend/src/services/searchService.js

API ENDPOINTS:
--------------
GET  /api/properties/search
GET  /api/properties/:property_id/detail
POST /api/shortlists/add
GET  /api/shortlists
DELETE /api/shortlists/:shortlist_id

FEATURES IN THIS PHASE:
-----------------------
âœ“ Search page with filters:
  - City/Location autocomplete (mock data)
  - Price range slider
  - BHK type selection
  - Property type filter
  - Sort options (price, date)

âœ“ Property cards grid:
  - Property image
  - Title, location, rent
  - BHK type and amenities
  - "Unverified" badge
  - Shortlist heart icon
  - Click to view details

âœ“ Property detail page:
  - Image gallery with lightbox
  - Complete property details
  - Amenities list
  - Location info
  - Owner info (masked)
  - "Contact Owner" button
  - "Add to Shortlist" button

âœ“ Renter dashboard:
  - Search suggestions
  - Shortlisted properties
  - Recent views

âœ“ Shortlist functionality:
  - Add/remove properties
  - View all shortlisted properties
  - Notes for each property

âœ“ Pagination for search results
âœ“ Responsive grid layout

DATABASE SCHEMA (shortlists table - MySQL/MariaDB):
----------------------------------------------------
- shortlist_id: VARCHAR(36) PRIMARY KEY (UUID)
- user_id: VARCHAR(36) (foreign key to users)
- property_id: VARCHAR(36) (foreign key to properties)
- notes: TEXT
- created_at: TIMESTAMP DEFAULT CURRENT_TIMESTAMP

(See workflow.txt Section 2 for complete CREATE TABLE statement)

TESTING CHECKLIST:
------------------
â–¡ Search page loads with all properties
â–¡ Filters work correctly (price, BHK, location)
â–¡ Can click property card to view details
â–¡ Property detail page shows all information
â–¡ Image gallery works with lightbox
â–¡ Can add property to shortlist
â–¡ Shortlist page shows all saved properties
â–¡ Can remove from shortlist
â–¡ Pagination works (if >20 properties)

WHAT WORKS AFTER PHASE 4:
--------------------------
âœ… Renters can search properties
âœ… Complete property viewing experience
âœ… Shortlist functionality
âœ… Both dashboards operational
âœ… Basic marketplace working (browse only)

=================================================================
PHASE 5: BASIC CHAT SYSTEM (REST API)
=================================================================

GOAL: Renters can contact owners via chat

ESTIMATED CREDITS: 4-5

WHAT WILL BE BUILT:
-------------------
1. Chat initiation
2. Messaging interface
3. Chat list view
4. Message persistence

FILES TO CREATE:
----------------
Backend:
- /app/backend/models/chat.py (Chat schema)
- /app/backend/routes/chats.py

Frontend:
- /app/frontend/src/pages/renter/Chats.js
- /app/frontend/src/pages/owner/Chats.js
- /app/frontend/src/components/ChatList.js
- /app/frontend/src/components/ChatWindow.js
- /app/frontend/src/components/MessageBubble.js
- /app/frontend/src/services/chatService.js

API ENDPOINTS:
--------------
POST /api/chats/initiate
GET  /api/chats
GET  /api/chats/:chat_id
POST /api/chats/:chat_id/messages
PUT  /api/chats/:chat_id/mark-read
GET  /api/chats/unread-count

FEATURES IN THIS PHASE:
-----------------------
âœ“ "Contact Owner" button on property detail page
âœ“ Creates chat on first contact
âœ“ Chat list page showing:
  - All conversations
  - Property thumbnail
  - Last message preview
  - Unread count badge
  - Timestamp

âœ“ Chat window with:
  - WhatsApp-style message bubbles
  - Text input field
  - Send button
  - Property info sidebar
  - Scroll to bottom on new message
  - Manual refresh button

âœ“ Messages stored in database
âœ“ Read/unread status tracking
âœ“ Notification badge with unread count

DATABASE SCHEMA (chats table - MySQL/MariaDB):
-----------------------------------------------
- chat_id: VARCHAR(36) PRIMARY KEY (UUID)
- property_id: VARCHAR(36) (foreign key to properties)
- renter_id: VARCHAR(36) (foreign key to users)
- owner_id: VARCHAR(36) (foreign key to users)
- created_at: TIMESTAMP DEFAULT CURRENT_TIMESTAMP
- last_message_at: TIMESTAMP
- messages: JSON (array of message objects with message_id, sender_id, 
  sender_type, message, timestamp, is_read)

NOTE: Messages stored as JSON array in chats table for REST API implementation.
Alternative: Create separate messages table for better scalability.

(See workflow.txt Section 2 for complete schema options)

TESTING CHECKLIST:
------------------
â–¡ Click "Contact Owner" creates chat
â–¡ Chat appears in both renter and owner chat lists
â–¡ Can send messages back and forth
â–¡ Messages persist after refresh
â–¡ Unread count updates correctly
â–¡ Chat list sorted by last message time
â–¡ Property info visible in chat window
â–¡ Timestamps show correctly

WHAT WORKS AFTER PHASE 5:
--------------------------
âœ… Full chat functionality (REST-based)
âœ… Renters can contact owners
âœ… Owners can reply to renters
âœ… Message persistence
âœ… Basic communication working

NOTE: Contact limits NOT enforced yet - that's Phase 6!

=================================================================
PHASE 6: FREE TIER LIMITS & UPSELL MODALS
=================================================================

GOAL: Enforce 2-contact limit for free renters and show upgrade prompts

ESTIMATED CREDITS: 3-4

WHAT WILL BE BUILT:
-------------------
1. Contact limit enforcement
2. Upsell modals for free users
3. Subscription tier display
4. Limit counter UI

FILES TO CREATE/MODIFY:
-----------------------
Backend:
- Update /app/backend/routes/chats.py (add limit check)
- /app/backend/middleware/subscription_check.py

Frontend:
- /app/frontend/src/components/UpgradeModal.js
- /app/frontend/src/components/SubscriptionBanner.js
- /app/frontend/src/components/ContactLimitIndicator.js
- Update ChatService to check limits

API ENDPOINTS (modify):
-----------------------
POST /api/chats/initiate (add limit enforcement)
GET  /api/users/contacts-remaining

FEATURES IN THIS PHASE:
-----------------------
âœ“ Contact limit check before chat creation:
  - If free tier and contacts_used >= 5 â†’ Show upgrade modal
  - If premium tier â†’ Allow unlimited contacts

âœ“ Upgrade modal with:
  - "You've reached your contact limit"
  - Feature comparison (Free vs Premium)
  - Benefits of upgrading
  - "Upgrade Now" CTA button
  - "Cancel" option

âœ“ Contact limit indicator:
  - Shows "3/5 contacts used" on renter dashboard
  - Color changes as limit approaches (green â†’ yellow â†’ red)
  - Visible on search page

âœ“ Subscription banner:
  - Shows current tier (Free/Premium)
  - Days remaining (if premium)
  - Upgrade button (if free)

âœ“ Backend logic:
  - Check subscription_tier before allowing contact
  - Increment contacts_used on successful chat creation
  - Return 403 error if limit reached

TESTING CHECKLIST:
------------------
â–¡ Free renter can contact 5 properties
â–¡ 6th contact attempt shows upgrade modal
â–¡ Premium renters have no contact limit
â–¡ Contact counter updates after each contact
â–¡ Dashboard shows correct contacts remaining
â–¡ Upgrade modal has proper styling and CTAs
â–¡ Can close modal and continue browsing

WHAT WORKS AFTER PHASE 6:
--------------------------
âœ… Free tier limitations enforced
âœ… Upsell mechanism in place
âœ… Contact limit tracking working
âœ… Clear value proposition for premium
âœ… Freemium model operational

=================================================================
PHASE 7: PAYMENT INTEGRATION (MOCK + RAZORPAY READY)
=================================================================

GOAL: Payment system with mock flow and Razorpay integration ready

ESTIMATED CREDITS: 5

WHAT WILL BE BUILT:
-------------------
1. Payment service (switchable mock/real)
2. Subscription purchase flow
3. Property verification payment
4. Transaction history
5. Mock payment UI

FILES TO CREATE:
----------------
Backend:
- /app/backend/models/transaction.py
- /app/backend/services/payment_service.py
- /app/backend/routes/payments.py
- /app/backend/utils/razorpay_helper.py

Frontend:
- /app/frontend/src/pages/renter/Subscription.js
- /app/frontend/src/pages/owner/Verification.js
- /app/frontend/src/pages/PaymentSuccess.js
- /app/frontend/src/pages/PaymentFailure.js
- /app/frontend/src/components/MockPaymentModal.js
- /app/frontend/src/components/PricingCard.js
- /app/frontend/src/services/paymentService.js

API ENDPOINTS:
--------------
POST /api/payments/create-order
POST /api/payments/verify
GET  /api/payments/history

FEATURES IN THIS PHASE:
-----------------------
âœ“ Renter subscription page:
  - Current plan display
  - Premium features list
  - Pricing: â‚¹750 for 90 days
  - "Upgrade Now" button

âœ“ Owner verification page:
  - Verification benefits
  - Pricing: â‚¹1,500 per property
  - Property selection dropdown
  - "Pay & Verify" button

âœ“ Payment service with mock detection:
  - If RAZORPAY_KEY_ID empty â†’ Mock mode
  - If RAZORPAY_KEY_ID exists â†’ Real Razorpay

âœ“ Mock payment flow:
  - Custom payment modal
  - "TEST MODE" banner (yellow)
  - Shows amount and invoice details
  - "Pay Now" button â†’ 2-second loading
  - Auto-generates mock payment_id
  - Always succeeds

âœ“ Real Razorpay flow (ready but inactive):
  - Creates Razorpay order
  - Opens Razorpay checkout modal
  - Verifies signature on success
  - Handles webhooks

âœ“ Transaction storage:
  - All payments stored in transactions table (MySQL/MariaDB)
  - Payment history page
  - Invoice download (PDF future, JSON now)

âœ“ Subscription update:
  - After successful payment:
    * Update user.subscription_tier = "premium"
    * Set subscription_start and subscription_end
    * Reset contacts_used to 0
  - Immediate feature unlock

âœ“ Property verification update:
  - After successful payment:
    * Update property.verification_fee_paid = true
    * Status remains "pending" until admin approves
    * Store transaction_id

DATABASE SCHEMA (transactions table - MySQL/MariaDB):
------------------------------------------------------
- transaction_id: VARCHAR(36) PRIMARY KEY (UUID)
- user_id: VARCHAR(36) (foreign key to users)
- transaction_type: ENUM('renter_subscription', 'property_verification')
- amount: DECIMAL(10,2)
- currency: VARCHAR(3) DEFAULT 'INR'
- payment_id: VARCHAR(255)
- order_id: VARCHAR(255)
- payment_status: ENUM('pending', 'success', 'failed', 'refunded')
- is_mock: BOOLEAN DEFAULT FALSE
- created_at: TIMESTAMP DEFAULT CURRENT_TIMESTAMP
- metadata: JSON (subscription_duration, property_id, etc.)

(See workflow.txt Section 2 for complete CREATE TABLE statement)

TESTING CHECKLIST:
------------------
â–¡ Click upgrade shows subscription page
â–¡ Click "Pay Now" shows mock payment modal
â–¡ "TEST MODE" banner is visible
â–¡ Mock payment completes after 2 seconds
â–¡ User tier updates to "premium"
â–¡ Contacts_used resets to 0
â–¡ Can now contact unlimited properties
â–¡ Property verification payment works
â–¡ Transaction appears in history
â–¡ Payment success page shows confirmation

WHAT WORKS AFTER PHASE 7:
--------------------------
âœ… Complete payment system (mock mode)
âœ… Renter subscription working
âœ… Property verification payment working
âœ… Transaction tracking
âœ… Ready to switch to real Razorpay (just add keys)

=================================================================
PHASE 8: PREMIUM FEATURES UNLOCK
=================================================================

GOAL: Unlock premium features after subscription

ESTIMATED CREDITS: 3-4

WHAT WILL BE BUILT:
-------------------
1. Premium badge display
2. Feature gating
3. Advanced filters UI (non-functional yet)
4. Verification status display

FILES TO CREATE/MODIFY:
-----------------------
Frontend:
- /app/frontend/src/components/PremiumBadge.js
- /app/frontend/src/components/VerifiedBadge.js
- /app/frontend/src/components/AdvancedFiltersPanel.js
- Update PropertyCard.js to show badges
- Update UserProfile.js to show subscription

Backend:
- Update search endpoint to check premium status

FEATURES IN THIS PHASE:
-----------------------
âœ“ Premium renter badge:
  - Blue star badge on profile
  - Visible in chat to owners
  - Shows on dashboard

âœ“ Verified property badge:
  - Green checkmark on property cards
  - Visible in search results
  - Shows on property detail page

âœ“ Unverified warning:
  - Yellow warning badge
  - "Not Verified" text
  - Visible on free listings

âœ“ Feature gating:
  - Free users see "Premium Only" lock on advanced filters
  - Clicking shows upgrade modal
  - Premium users see full advanced filter panel

âœ“ Advanced filters panel (UI only):
  - Lifestyle search section (grayed out for free users)
  - AQI slider (non-functional yet)
  - Noise level slider (non-functional yet)
  - Walkability slider (non-functional yet)
  - "Near parks" checkbox (non-functional yet)
  - Will be made functional in Phase 9

âœ“ Subscription status display:
  - Shows "Premium" or "Free" on dashboard
  - Days remaining for premium users
  - Expiry date

âœ“ Search ranking update:
  - Verified properties appear first
  - Unverified properties at bottom
  - Sort by verification status

TESTING CHECKLIST:
------------------
â–¡ Premium renters have blue badge
â–¡ Verified properties have green badge
â–¡ Unverified properties have yellow warning
â–¡ Advanced filters panel visible but locked for free users
â–¡ Premium users can see advanced filters (non-functional)
â–¡ Search results show verified properties first
â–¡ Dashboard displays correct subscription status
â–¡ Days remaining countdown works

WHAT WORKS AFTER PHASE 8:
--------------------------
âœ… Premium/Free tier visually distinct
âœ… Badges working everywhere
âœ… Feature gating operational
âœ… Search ranking by verification
âœ… UI ready for lifestyle search

=================================================================
PHASE 9: LIFESTYLE SEARCH ENGINE (MOCK DATA)
=================================================================

GOAL: Implement lifestyle search with mock data generation

ESTIMATED CREDITS: 5

WHAT WILL BE BUILT:
-------------------
1. Mock lifestyle data generation
2. Lifestyle data calculation service
3. Advanced search filters (functional)
4. Natural language search (with Emergent LLM)
5. Lifestyle data display on properties

FILES TO CREATE:
----------------
Backend:
- /app/backend/services/lifestyle_service.py
- /app/backend/services/llm_service.py
- /app/backend/routes/lifestyle.py
- /app/backend/utils/mock_data_generator.py

Frontend:
- /app/frontend/src/pages/LifestyleSearch.js
- /app/frontend/src/components/LifestyleScoreBadge.js
- /app/frontend/src/components/NaturalLanguageSearch.js
- /app/frontend/src/components/AmenityMap.js
- Update AdvancedFiltersPanel.js (make functional)

API ENDPOINTS:
--------------
POST /api/properties/:property_id/calculate-lifestyle
GET  /api/properties/lifestyle-search
POST /api/search/natural-language

FEATURES IN THIS PHASE:
-----------------------
âœ“ Lifestyle data generation for verified properties:
  - AQI score (mock: 30-150 based on city type)
  - Noise level (mock: 45-75 dB based on location)
  - Walkability score (mock: 20-90 based on area)
  - Nearby parks (mock: 1-3 parks with distances)
  - Nearby hospitals (mock: 1-2 with distances)
  - Nearby schools (mock: 1-2 with distances)
  - Public transport score (mock: 50-90)
  - Safety score (mock: 60-85)

âœ“ Auto-calculate on property verification:
  - When property.is_verified = true
  - Generate and store lifestyle_data
  - Cache for consistency

âœ“ Advanced filters (now functional):
  - AQI slider: 0-200
  - Noise level slider: 0-100 dB
  - Walkability slider: 0-100
  - "Near parks" toggle
  - "Pet friendly" toggle
  - All filters working

âœ“ Lifestyle search API:
  - Only premium renters can access
  - Only returns verified properties
  - Filters by lifestyle criteria
  - Calculates match score
  - Sorts by relevance

âœ“ Natural language search:
  - Text input: "quiet 2bhk near park under 25000"
  - Uses Emergent LLM to parse
  - Converts to structured filters
  - Falls back to keyword matching if LLM fails
  - Shows extracted filters to user

âœ“ Lifestyle data display:
  - Color-coded badges:
    * AQI: Green (<50), Yellow (50-100), Red (>100)
    * Noise: Green (<55), Yellow (55-70), Red (>70)
    * Walkability: Green (>70), Yellow (40-70), Red (<40)
  - Progress bars for scores
  - Amenity list with distances
  - Tooltips explaining metrics

âœ“ Mock data indicator:
  - Small "(Mock Data)" label
  - Will disappear when real APIs are added

LIFESTYLE DATA SCHEMA (in property document):
----------------------------------------------
{
  lifestyle_data: {
    aqi_score: 65,
    noise_level: 58,
    walkability_score: 72,
    nearby_parks: [
      {name: "Central Park", distance: 0.8},
      {name: "Green Garden", distance: 1.5}
    ],
    nearby_hospitals: [{name: "Apollo", distance: 2.1}],
    nearby_schools: [{name: "DPS", distance: 1.0}],
    public_transport_score: 75,
    safety_score: 68,
    calculated_at: DateTime,
    is_mock: true
  }
}

TESTING CHECKLIST:
------------------
â–¡ Verified properties have lifestyle data generated
â–¡ Free properties don't have lifestyle data
â–¡ Advanced filters work (premium users only)
â–¡ Can filter by AQI, noise, walkability
â–¡ Natural language search extracts filters correctly
â–¡ Lifestyle search returns relevant properties
â–¡ Property cards show lifestyle badges
â–¡ Property detail page shows full lifestyle report
â–¡ Color coding is correct
â–¡ Mock data is realistic and varied

WHAT WORKS AFTER PHASE 9:
--------------------------
âœ… Complete lifestyle search engine
âœ… Natural language search with AI
âœ… Mock data generation working
âœ… Advanced filters functional
âœ… Our main USP/moat is operational!
âœ… Ready to switch to real APIs

=================================================================
PHASE 10: DOCUMENT VERIFICATION WORKFLOW
=================================================================

GOAL: Document upload and verification system

ESTIMATED CREDITS: 4-5

WHAT WILL BE BUILT:
-------------------
1. Document upload interface
2. Verification status tracking
3. Admin review page (simple)
4. Verification approval/rejection

FILES TO CREATE:
----------------
Backend:
- /app/backend/routes/verification.py
- /app/backend/services/document_service.py
- /app/backend/routes/admin.py

Frontend:
- /app/frontend/src/pages/renter/VerificationUpload.js
- /app/frontend/src/pages/owner/PropertyVerification.js
- /app/frontend/src/pages/admin/VerificationReview.js
- /app/frontend/src/components/DocumentUpload.js
- /app/frontend/src/components/VerificationStatusTracker.js
- /app/frontend/src/services/verificationService.js

API ENDPOINTS:
--------------
POST /api/verification/renter/upload
POST /api/verification/property/:id/upload
GET  /api/verification/status
GET  /api/admin/verifications/pending
POST /api/admin/verifications/:id/approve
POST /api/admin/verifications/:id/reject

FEATURES IN THIS PHASE:
-----------------------
âœ“ Renter verification upload:
  - Document checklist
  - ID proof upload (Aadhaar/PAN)
  - Income proof upload (salary slips/bank statements/ITR)
  - Employment details form
  - Submit for review

âœ“ Property verification upload:
  - Document checklist
  - Owner ID proof
  - Ownership proof (electricity bill/property tax/deed)
  - Property selection
  - Payment confirmation check
  - Submit for review

âœ“ Verification status tracker:
  - Shows current status: "Not Started", "Pending", "Approved", "Rejected"
  - Step-by-step progress indicator
  - Estimated review time (24-48 hours)
  - Rejection reason (if rejected)

âœ“ Document storage:
  - Local file storage in /uploads/verification/
  - Organized by user_id and document type
  - Secure access (only user and admin)

âœ“ Admin review page:
  - List of pending verifications
  - Filter by type (renter/property)
  - View uploaded documents
  - Approve/Reject buttons
  - Rejection reason text field

âœ“ Approval process:
  - Admin clicks "Approve"
  - For renter:
    * user.renter_profile.is_verified = true
    * Gets verified badge
    * Added to reverse marketplace
  - For property:
    * property.is_verified = true
    * property.verification_tier = "verified"
    * Lifestyle data calculated
    * Moves to top of search

âœ“ Rejection process:
  - Admin clicks "Reject" with reason
  - User receives rejection notification
  - Can resubmit documents
  - Reason displayed to user

âœ“ Email notifications (logged to console if no email service):
  - Verification received
  - Verification approved
  - Verification rejected

TESTING CHECKLIST:
------------------
â–¡ Renter can upload verification documents
â–¡ Property owner can upload verification documents
â–¡ Files upload and store correctly
â–¡ Status changes to "Pending" after submission
â–¡ Admin can see pending verifications
â–¡ Admin can view uploaded documents
â–¡ Admin can approve verification
â–¡ Verified badge appears after approval
â–¡ Lifestyle data generates for verified property
â–¡ Admin can reject with reason
â–¡ User sees rejection reason
â–¡ Can resubmit after rejection

WHAT WORKS AFTER PHASE 10:
---------------------------
âœ… Complete verification workflow
âœ… Document upload working
âœ… Admin review system operational
âœ… Verification badges functional
âœ… Trust system fully implemented

=================================================================
PHASE 11: REVERSE MARKETPLACE
=================================================================

GOAL: Owners can browse and contact verified renters

ESTIMATED CREDITS: 4-5

WHAT WILL BE BUILT:
-------------------
1. Anonymous renter profile generation
2. Reverse marketplace browse page
3. Owner-initiated contact
4. Privacy controls for renters

FILES TO CREATE:
----------------
Backend:
- /app/backend/routes/reverse_marketplace.py
- /app/backend/services/renter_profile_service.py

Frontend:
- /app/frontend/src/pages/owner/ReverseMarketplace.js
- /app/frontend/src/components/AnonymousRenterCard.js
- /app/frontend/src/components/RenterFilters.js
- /app/frontend/src/pages/renter/PrivacySettings.js
- /app/frontend/src/services/reverseMarketplaceService.js

API ENDPOINTS:
--------------
GET  /api/reverse-marketplace/renters
POST /api/reverse-marketplace/contact-renter
PUT  /api/users/privacy-settings

FEATURES IN THIS PHASE:
-----------------------
âœ“ Anonymous renter profile generation:
  - Only premium + verified renters
  - Format: "Renter #" + last 4 digits of user_id
  - Shows:
    * Employment type (IT, Banking, Healthcare, etc.)
    * Income range (>â‚¹10 LPA, >â‚¹15 LPA, etc.)
    * Looking for (BHK type)
    * Budget range
    * Preferred locations
    * Move-in date
    * Lifestyle preferences
  - Hides:
    * Name, email, phone
    * Exact salary
    * Current address

âœ“ Reverse marketplace page (owners only):
  - Requires verified owner status
  - Grid of anonymous renter cards
  - Filters:
    * Budget range
    * BHK type
    * Preferred location
    * Move-in date range
    * Employment type
  - Sort by: Recent, Budget, Move-in date

âœ“ Renter card design:
  - Anonymous ID prominently displayed
  - Key info in card format
  - "Match Score" if filtering by property
  - "Contact Renter" button
  - Verified badge

âœ“ Owner-initiated contact:
  - Click "Contact Renter"
  - Modal to select which property to pitch
  - Write initial message
  - Submit creates chat with owner as initiator

âœ“ Renter receives notification:
  - "A verified owner is interested in you"
  - Property details shown
  - Owner's message
  - Can reply or ignore

âœ“ Privacy controls for renters:
  - Settings page in renter profile
  - Toggle: "Make my profile visible to verified owners"
  - Default: ON (if premium + verified)
  - Can opt out anytime
  - Info about what's shared and what's hidden

âœ“ Access control:
  - Only verified owners can access reverse marketplace
  - Only premium + verified renters listed
  - Only renters who opted in

âœ“ Match score calculation:
  - If owner is viewing from specific property
  - Calculate compatibility:
    * Budget match
    * Location preference match
    * BHK match
    * Move-in date proximity
  - Show percentage match

TESTING CHECKLIST:
------------------
â–¡ Premium + verified renters appear in reverse marketplace
â–¡ Profiles are properly anonymized
â–¡ Free renters don't appear
â–¡ Unverified owners can't access page
â–¡ Filters work correctly
â–¡ Owner can initiate contact
â–¡ Chat created with owner as initiator
â–¡ Renter receives notification
â–¡ Can reply to owner-initiated chat
â–¡ Privacy toggle works (opt out hides profile)
â–¡ Match score displays correctly

WHAT WORKS AFTER PHASE 11:
---------------------------
âœ… Reverse marketplace fully functional
âœ… Our second major USP operational!
âœ… Two-way marketplace complete
âœ… Privacy-first approach working
âœ… Unique value for both sides

=================================================================
PHASE 12: ANALYTICS DASHBOARD & POLISH
=================================================================

GOAL: Owner analytics, UI polish, and final touches

ESTIMATED CREDITS: 4-5

WHAT WILL BE BUILT:
-------------------
1. Owner property analytics
2. Performance metrics
3. Upsell messages for free owners
4. UI polish and animations
5. Final testing and bug fixes

FILES TO CREATE:
----------------
Backend:
- /app/backend/routes/analytics.py
- /app/backend/services/analytics_service.py

Frontend:
- /app/frontend/src/pages/owner/PropertyAnalytics.js
- /app/frontend/src/components/AnalyticsChart.js
- /app/frontend/src/components/PerformanceCard.js
- /app/frontend/src/components/UpgradePrompt.js
- /app/frontend/src/components/LoadingSpinner.js
- /app/frontend/src/components/Skeleton.js

API ENDPOINTS:
--------------
GET /api/properties/:id/analytics
POST /api/properties/:id/track-view
GET /api/analytics/comparison

FEATURES IN THIS PHASE:
-----------------------
âœ“ Property analytics tracking:
  - Track views (increment on property detail page load)
  - Track premium views (if viewer is premium renter)
  - Track contacts (when chat initiated)
  - Track shortlists
  - Last viewed timestamp

âœ“ Analytics dashboard page:
  - Total views (line chart over time)
  - Total contacts
  - Shortlist count
  - Premium viewer percentage
  - View-to-contact conversion rate
  - Time on market

âœ“ Performance comparison:
  - Verified vs Unverified comparison
  - Show: "Verified properties get 5X more views"
  - Industry averages
  - Your property ranking

âœ“ Upsell for free owners:
  - Banner on analytics page
  - "Your unverified listing is getting 90% fewer views"
  - "Get verified to rank higher"
  - Show potential reach increase
  - "Upgrade Now" CTA

âœ“ UI polish:
  - Add loading skeletons
  - Smooth page transitions
  - Hover effects on all cards
  - Success animations
  - Error handling improvements
  - Toast notifications
  - Consistent spacing and typography

âœ“ Performance optimizations:
  - Lazy loading for images
  - Debounce search inputs
  - Pagination for large lists
  - Caching frequently accessed data

âœ“ Mobile responsiveness:
  - Test all pages on mobile
  - Fix any layout issues
  - Touch-friendly buttons
  - Mobile navigation

âœ“ Final testing:
  - Test all user flows
  - Test payment (mock)
  - Test verification workflow
  - Test chat system
  - Test lifestyle search
  - Test reverse marketplace
  - Cross-browser testing

âœ“ Documentation:
  - Update README.md
  - API documentation
  - Setup instructions
  - Environment variables guide

ANALYTICS SCHEMA (in properties table - MySQL/MariaDB):
--------------------------------------------------------
Analytics stored as JSON column in properties table:

- analytics: JSON column containing:
  {
    total_views: 156,
    premium_views: 42,
    total_contacts: 8,
    shortlisted_count: 23,
    last_viewed: "2025-01-02 14:30:00",
    views_history: [
      {date: "2025-01-01", count: 12},
      {date: "2025-01-02", count: 15}
    ]
  }

Alternative: Create separate property_analytics table for better performance
(See workflow.txt for additional schema options)

TESTING CHECKLIST:
------------------
â–¡ Analytics page loads correctly
â–¡ View counts increment on property view
â–¡ Charts display correctly
â–¡ Performance comparison shows
â–¡ Upsell messages appear for unverified owners
â–¡ All pages responsive on mobile
â–¡ Loading states work smoothly
â–¡ All animations smooth
â–¡ No console errors
â–¡ All features tested end-to-end
â–¡ Payment flow works (mock)
â–¡ Chat works both ways
â–¡ Search and filters work
â–¡ Verification workflow complete
â–¡ Reverse marketplace functional

WHAT WORKS AFTER PHASE 12:
---------------------------
âœ… Complete MVP is ready!
âœ… All features fully functional
âœ… Analytics dashboard operational
âœ… Professional UI/UX
âœ… Mobile responsive
âœ… Ready for demo/launch
âœ… Can switch to production APIs anytime
âœ… Database ready to migrate from MariaDB (dev) to MySQL (production)

=================================================================
FINAL MVP FEATURE LIST (ALL 12 PHASES COMPLETE)
=================================================================

âœ… AUTHENTICATION:
   - User registration and login
   - JWT-based authorization
   - Password hashing

âœ… PROPERTY MANAGEMENT:
   - Create, edit, delete properties
   - Image upload
   - Comprehensive property details

âœ… SEARCH & DISCOVERY:
   - Basic search with filters
   - Advanced lifestyle search (premium)
   - Natural language search with AI
   - Search ranking by verification

âœ… CHAT SYSTEM:
   - Renter-to-owner messaging
   - Owner-to-renter messaging
   - Message persistence
   - Unread counts

âœ… FREEMIUM MODEL:
   - Free tier (5 contact limit)
   - Premium tier (unlimited + perks)
   - Feature gating
   - Upsell modals

âœ… PAYMENT SYSTEM:
   - Mock payment (default)
   - Razorpay integration ready
   - Subscription management
   - Transaction history

âœ… LIFESTYLE SEARCH:
   - Mock AQI, noise, walkability data
   - Advanced filters
   - Lifestyle data display
   - Switchable to real APIs

âœ… VERIFICATION:
   - Document upload
   - Admin review
   - Approval/rejection
   - Verified badges

âœ… REVERSE MARKETPLACE:
   - Anonymous renter profiles
   - Owner browse and contact
   - Privacy controls
   - Match scoring

âœ… ANALYTICS:
   - Property performance metrics
   - View tracking
   - Comparison charts
   - Upsell messaging

âœ… UI/UX:
   - Professional design
   - Responsive layout
   - Smooth animations
   - Loading states

=================================================================
CREDIT ESTIMATION PER PHASE
=================================================================

Phase 1:  4-5 credits (Setup + Landing)
Phase 2:  4-5 credits (Auth)
Phase 3:  4-5 credits (Property Listing)
Phase 4:  4-5 credits (Search)
Phase 5:  4-5 credits (Chat)
Phase 6:  3-4 credits (Limits)
Phase 7:  5 credits (Payment)
Phase 8:  3-4 credits (Premium Features)
Phase 9:  5 credits (Lifestyle Search)
Phase 10: 4-5 credits (Verification)
Phase 11: 4-5 credits (Reverse Marketplace)
Phase 12: 4-5 credits (Analytics & Polish)

TOTAL: ~50-58 credits for complete MVP

=================================================================
HOW TO USE THIS PLAN
=================================================================

1. START WITH PHASE 1
   - Tell the agent: "Let's start Phase 1"
   - Agent will build everything in Phase 1
   - Test thoroughly before moving on

2. MOVE TO NEXT PHASE ONLY AFTER TESTING
   - Each phase builds on previous
   - Don't skip phases
   - Test each phase before proceeding

3. AFTER EACH PHASE:
   - Test all features listed in "Testing Checklist"
   - Verify "What Works After Phase X"
   - Fix any issues before next phase

4. WHEN COMPLETE:
   - You'll have a fully functional MVP
   - Can launch with mock data
   - Can switch to production APIs by adding keys to .env

5. SWITCHING TO PRODUCTION:
   - Add API keys to .env file
   - Update DATABASE_URL with YOUR MySQL credentials (see workflow.txt)
   - Export schema from MariaDB and import to your MySQL
   - Restart servers
   - No code changes needed - 100% compatible!

=================================================================
DATABASE MIGRATION: MARIADB (DEV) â†’ MySQL (PRODUCTION)
=================================================================

After completing all phases, to deploy to YOUR production MySQL:

STEP 1: EXPORT SCHEMA FROM MARIADB (Development)
-------------------------------------------------
The LLM will have created all tables in MariaDB during development.
Export the schema:
```bash
mysqldump -u root -d homer_db > homer_schema.sql
```

STEP 2: IMPORT TO YOUR MYSQL (Production)
------------------------------------------
On your production MySQL server:
```bash
mysql -u your_user -p your_database < homer_schema.sql
```

STEP 3: UPDATE .ENV FILE
-------------------------
Change in /app/backend/.env:
FROM: DATABASE_URL=mysql://root@localhost:3306/homer_db
TO:   DATABASE_URL=mysql://your_user:your_password@your_host:3306/homer_db

STEP 4: RESTART BACKEND
------------------------
```bash
sudo supervisorctl restart backend
```

STEP 5: VERIFY CONNECTION
--------------------------
Check backend logs to confirm MySQL connection successful.

âœ… ZERO CODE CHANGES REQUIRED!
All SQL queries work identically on both MariaDB and MySQL.

=================================================================
END OF PHASED IMPLEMENTATION PLAN
=================================================================

Each phase is self-contained and delivers working features.
Total time: 12 phases Ã— 1 session = ~12 work sessions
Total credits: ~50-58 credits

DATABASE COMPATIBILITY:
- Development: MariaDB (LLM uses this)
- Production: MySQL (you use this with your credentials)
- 100% compatible - same SQL syntax
- See workflow.txt for complete database strategy

Ready to start Phase 1? ðŸš€
